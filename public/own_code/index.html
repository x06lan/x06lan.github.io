<!DOCTYPE html>
<html lang="en">

<head>
    <title> markdown editor</title>
    <link rel="icon" href="https://x06lan.github.io/img/x06_icon.png" type="image/x-icon"/>


    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.js" integrity="sha512-GZ1RIgZaSc8rnco/8CXfRdCpDxRCphenIiZ2ztLy3XQfCbQUSCuk8IudvNHxkRA3oUg6q0qejgN/qqyG1duv5Q==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/keybinding-sublime.min.js" integrity="sha512-k2DJkSlsFeAca9OAVhZBxUk1k3JeD2nfzHiWhfeSPZJq4UvM71Wfeg5hVOfuEtt5MN2j3NiOZhCynhqWDxK95A==" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/showdown@1.8.4/dist/showdown.js" crossorigin="anonymous"></script>"
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.7.1/build/highlight.min.js"></script>
    <script src="./js/own_seting.js"></script>
    <script src="./js/showdown-table.js"></script>
    <link href="./css/highlight_monotai.css" rel="stylesheet">
    <link rel="stylesheet" href="./css/markdown.css">
    <style type="text/css" media="screen">
         :root {
            --windowhight: 500px;
        }
        
        #editor {
            position: absolute;
            top: 0px;
            right: 50%;
            bottom: 0;
            left: 0;
            width: 50%;
            overflow: auto;
            /*  not bar */
            /* border-radius: 5px; */
            /* padding: 0px; */
            /* font-size: 150%; */
            /* flex: 1 1 auto; */
            /* box-sizing: border-box; */
            /* height: 100%; */
            /* bottom: 0; */
        }
        
        .preview {
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            left: 50%;
            width: 50%;
            overflow: auto;
            /* border-radius: 5px; */
            /* padding: 20px; */
            /* font-size: 150%; */
            /* flex: 1 1 auto; */
            /* box-sizing: border-box; */
            /* height: 100%; */
            /* height: var("--windowhight"); */
        }
        
        .wrapper {
            background-color: #fff;
            color: #444444;
            /* Use flexbox */
            display: flex;
            height: 100%;
            /* height: var("--windowhight"); */
        }
        
        .box {
            background-color: #444;
            color: #fff;
            border-radius: 5px;
            padding: 20px;
            font-size: 150%;
            flex: 1 1 auto;
            box-sizing: border-box;
        }
        
        .handler {
            width: 10px;
            padding: 0;
            cursor: ew-resize;
            flex: 0 0 auto;
        }
        
        .handler::before {
            content: '';
            display: block;
            width: 4px;
            height: 100%;
            background: red;
            margin: 0 auto;
        }
    </style>

</head>

<body>
    <div class="head">

    </div>
    <!-- <div class="wrapper"> -->

    <div id="editor"></div>
    <!-- <div class="handler"></div> -->
    <div class="preview"></div>

    <!-- </div> -->


    <script>
        var editor = ace.edit("editor");
        editor.setTheme("ace/theme/monokai");
        editor.session.setMode("ace/mode/markdown");
        // editor.session.setMode("ace/mode/javascript");
        console.log(window.innerHeight)
        let config = {
            "tables": true,
            "parseImgDimensions": true
        }
        editor.addEventListener("change", () => {
            var converter = new showdown.Converter(config),
                input = editor.getValue(),
                html = converter.makeHtml(input);
            // console.log(html);
            document.getElementsByClassName("preview")[0].innerHTML = html;
            var root = document.querySelector(':root');
            root.style.setProperty('--windowhight', window.innerHeight + "px");

            document.querySelectorAll('.preview code').forEach(element => {
                hljs.highlightBlock(element);
                // console.log(element);

            })
            every_update()
        })



        fetch('./' + 'sample.md').then((response) => {
            // console.log(response)
            return response.text()
        }).then((Data) => {
            // console.log(Data)
            editor.setValue(Data)
        }).catch((err) => {
            console.log('error:', err);
        });
        // durg_bar()
    </script>
</body>

</html>